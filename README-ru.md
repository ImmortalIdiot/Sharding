### English version: [README-en.md](https://github.com/ImmortalIdiot/Sharding/blob/master/README-en.md)

___

# üìù –û–ø–∏—Å–∞–Ω–∏–µ

–≠—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **—à–∞—Ä–¥–∏–Ω–≥ –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è** –¥–ª—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É 3 —à–∞—Ä–¥–∞–º–∏. –ö–∞–∂–¥—ã–π —à–∞—Ä–¥ —Ö—Ä–∞–Ω–∏—Ç —Ç–∞–±–ª–∏—Ü—É `users` –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö PostgreSQL. –¢–∞–±–ª–∏—Ü–∞ –∏–º–µ–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –ø–æ–ª—è:

| –ü–æ–ª–µ   | –¢–∏–ø     | –û–ø–∏—Å–∞–Ω–∏–µ              |
|--------|---------|-----------------------|
| `id`   | UUID    | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä (–ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á) |
| `name` | TEXT    | –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º) |
| `email`| TEXT    | –≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –ø–æ—á—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º) |

---

# üõ†Ô∏è –°—Ç–µ–∫

- **Kotlin** ‚Äî —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —è–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è.
- **Ktor** ‚Äî —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö —Å–µ—Ä–≤–µ—Ä–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –Ω–∞ Kotlin.
- **Exposed** ‚Äî –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö –≤ —Å—Ç–∏–ª–µ Kotlin DSL.
- **PostgreSQL** ‚Äî —Ä–µ–ª—è—Ü–∏–æ–Ω–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö.

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç **3 —à–∞—Ä–¥–∞**.

---

# üñ•Ô∏è –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ IDE –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

–î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ –ø–æ–Ω–∞–¥–æ–±—è—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:

- **IDE**:
  - IntelliJ IDEA (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è IDE –¥–ª—è Kotlin).
  - –î—Ä—É–≥–∏–µ IDE —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π Kotlin –º–æ–≥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å, –Ω–æ –¥–ª—è –ª—É—á—à–µ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å IntelliJ IDEA.
- **Docker**:
  - Docker –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏–∏ PostgreSQL.
  - Docker Compose –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–Ω–æ–≥–æ–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω—ã–º–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏.
- **HTTP –∫–ª–∏–µ–Ω—Ç**:
  - Postman –∏–ª–∏ –ª—é–±–æ–π –¥—Ä—É–≥–æ–π HTTP –∫–ª–∏–µ–Ω—Ç –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è API.

---

# üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

–î–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø—Ä–æ–µ–∫—Ç–æ–º –≤–∞–º –ø–æ–Ω–∞–¥–æ–±—è—Ç—Å—è:

- **Docker**
- **Docker Compose**
- **Postman** –∏–ª–∏ –ª—é–±–æ–π HTTP –∫–ª–∏–µ–Ω—Ç
- **IDE** –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å IntelliJ IDEA)

## –®–∞–≥–∏:

1. **–°–∫–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:**

    ```bash
    git clone https://github.com/ImmortalIdiot/Sharding
    ```

2. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã:**

    –í –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ –æ—Ç–∫—Ä–æ–π—Ç–µ —Ç–µ—Ä–º–∏–Ω–∞–ª –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É:

    ```bash
    docker-compose up
    ```

    –ï—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Docker Desktop, —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –æ–Ω –∑–∞–ø—É—â–µ–Ω.

3. **–°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü –≤ –∫–∞–∂–¥–æ–º —à–∞—Ä–¥–µ:**

    –ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –±—É–¥—É—Ç –∑–∞–ø—É—â–µ–Ω—ã, –æ—Ç–∫—Ä–æ–π—Ç–µ —Ç–µ—Ä–º–∏–Ω–∞–ª –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü –≤ –∫–∞–∂–¥–æ–º —à–∞—Ä–¥–µ:

    –î–ª—è –ø–µ—Ä–≤–æ–≥–æ —à–∞—Ä–¥–∞:
    ```bash
    docker exec -it sharding-shard1-1 psql -U postgres -d shard1
    ```

    –í psql –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É:

    ```sql
    CREATE TABLE users(
        id UUID PRIMARY KEY,
        name TEXT NOT NULL,
        email TEXT NOT NULL
    );
    ```

    –î–ª—è –≤—ã—Ö–æ–¥–∞ –∏–∑ psql –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

    ```bash
    \q
    ```

    –ü–æ–≤—Ç–æ—Ä–∏—Ç–µ —ç—Ç–∏ —à–∞–≥–∏ –¥–ª—è –≤—Ç–æ—Ä–æ–≥–æ –∏ —Ç—Ä–µ—Ç—å–µ–≥–æ —à–∞—Ä–¥–∞:

    –î–ª—è –≤—Ç–æ—Ä–æ–≥–æ —à–∞—Ä–¥–∞:
    ```bash
    docker exec -it sharding-shard2-1 psql -U postgres -d shard2
    ```

    –î–ª—è —Ç—Ä–µ—Ç—å–µ–≥–æ —à–∞—Ä–¥–∞:
    ```bash
    docker exec -it sharding-shard3-1 psql -U postgres -d shard3
    ```

4. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç:**

    –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–æ–µ–∫—Ç –≤ –≤–∞—à–µ–π IDE (–Ω–∞–ø—Ä–∏–º–µ—Ä, IntelliJ IDEA), –Ω–∞–π–¥–∏—Ç–µ —Ñ–∞–π–ª `Application.kt` –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –º–µ—Ç–æ–¥ `main`.

5. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã API —Å –ø–æ–º–æ—â—å—é Postman:**

    –û—Ç–∫—Ä–æ–π—Ç–µ Postman –∏–ª–∏ –ª—é–±–æ–π –¥—Ä—É–≥–æ–π HTTP –∫–ª–∏–µ–Ω—Ç –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è API.

    - **POST-–∑–∞–ø—Ä–æ—Å:**

        - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –º–µ—Ç–æ–¥ –∑–∞–ø—Ä–æ—Å–∞: `POST`
        - –í–≤–µ–¥–∏—Ç–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç: `http://localhost:8080/users`
        ![–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ](https://github.com/user-attachments/assets/91803141-9d63-4521-91b3-2c8bdfe816d3)

        - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤–æ –≤–∫–ª–∞–¥–∫—É **Headers**:
            - –í –ø–æ–ª–µ **key** —É–∫–∞–∂–∏—Ç–µ `Content-Type`
            - –í –ø–æ–ª–µ **value** —É–∫–∞–∂–∏—Ç–µ `application/json`.
            ![–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ](https://github.com/user-attachments/assets/6806a4e6-04ec-4636-9b6e-bc928764a472)

        - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤–æ –≤–∫–ª–∞–¥–∫—É **Body**, –≤—ã–±–µ—Ä–∏—Ç–µ `raw`, `JSON` –∏ –≤—Å—Ç–∞–≤—å—Ç–µ json. –ü—Ä–∏–º–µ—Ä:

            ```json
            {
                "name": "John Doe",
                "email": "johndoe@example.com"
            }
            ```
        ![–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ](https://github.com/user-attachments/assets/7a5f0058-116d-4b9c-b69c-3d96c2d866bd)

        - –ù–∞–∂–º–∏—Ç–µ **Send**.

      –†–µ–∑—É–ª—å—Ç–∞—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–≥–æ post-–∑–∞–ø—Ä–æ—Å–∞:
      ![–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ](https://github.com/user-attachments/assets/2f81a798-7883-4920-93d6-b3b2e56c96d1)

    - **GET-–∑–∞–ø—Ä–æ—Å:**

        - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –º–µ—Ç–æ–¥ –∑–∞–ø—Ä–æ—Å–∞: `GET`
        - –í–≤–µ–¥–∏—Ç–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç: `http://localhost:8080/users/{id}`
        - –ó–∞–º–µ–Ω–∏—Ç–µ `{id}` –Ω–∞ id –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –ü—Ä–∏–º–µ—Ä –ø–æ–ª–Ω–æ–≥–æ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞:

            ```
            http://localhost:8080/users/cd3fce2c-4abd-41d7-ac2d-896454fd03e4
            ```
        ![–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ](https://github.com/user-attachments/assets/b7a80bc8-20aa-495d-91d3-f9430b50fce3)

        - –ù–∞–∂–º–∏—Ç–µ **Send**.
     
      –†–µ–∑—É–ª—å—Ç–∞—Ç get-–∑–∞–ø—Ä–æ—Å–∞:
      ![–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ](https://github.com/user-attachments/assets/73f5f3b6-ccb7-4eec-9edf-6e9a3c2aed0d)

–í –∫–æ–Ω—Å–æ–ª–∏ –≤–æ –≤–∫–ª–∞–¥–∫–µ `Run` –º–æ–∂–Ω–æ —É–≤–∏–¥–µ—Ç—å –ª–æ–≥–∏ –∑–∞–ø—Ä–æ—Å–æ–≤:
![–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ](https://github.com/user-attachments/assets/b3d14b36-0cdc-4d97-a0f9-537912614714)
